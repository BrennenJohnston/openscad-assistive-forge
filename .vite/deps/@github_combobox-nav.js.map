{
  "version": 3,
  "sources": ["../../node_modules/@github/combobox-nav/dist/index.js"],
  "sourcesContent": ["export default class Combobox {\n    constructor(input, list, { tabInsertsSuggestions, firstOptionSelectionMode, scrollIntoViewOptions } = {}) {\n        this.input = input;\n        this.list = list;\n        this.tabInsertsSuggestions = tabInsertsSuggestions !== null && tabInsertsSuggestions !== void 0 ? tabInsertsSuggestions : true;\n        this.firstOptionSelectionMode = firstOptionSelectionMode !== null && firstOptionSelectionMode !== void 0 ? firstOptionSelectionMode : 'none';\n        this.scrollIntoViewOptions = scrollIntoViewOptions !== null && scrollIntoViewOptions !== void 0 ? scrollIntoViewOptions : { block: 'nearest', inline: 'nearest' };\n        this.isComposing = false;\n        if (!list.id) {\n            list.id = `combobox-${Math.random().toString().slice(2, 6)}`;\n        }\n        this.ctrlBindings = !!navigator.userAgent.match(/Macintosh/);\n        this.keyboardEventHandler = event => keyboardBindings(event, this);\n        this.compositionEventHandler = event => trackComposition(event, this);\n        this.inputHandler = this.clearSelection.bind(this);\n        input.setAttribute('role', 'combobox');\n        input.setAttribute('aria-controls', list.id);\n        input.setAttribute('aria-expanded', 'false');\n        input.setAttribute('aria-autocomplete', 'list');\n        input.setAttribute('aria-haspopup', 'listbox');\n    }\n    destroy() {\n        this.clearSelection();\n        this.stop();\n        this.input.removeAttribute('role');\n        this.input.removeAttribute('aria-controls');\n        this.input.removeAttribute('aria-expanded');\n        this.input.removeAttribute('aria-autocomplete');\n        this.input.removeAttribute('aria-haspopup');\n    }\n    start() {\n        this.input.setAttribute('aria-expanded', 'true');\n        this.input.addEventListener('compositionstart', this.compositionEventHandler);\n        this.input.addEventListener('compositionend', this.compositionEventHandler);\n        this.input.addEventListener('input', this.inputHandler);\n        this.input.addEventListener('keydown', this.keyboardEventHandler);\n        this.list.addEventListener('click', commitWithElement);\n        this.resetSelection();\n    }\n    stop() {\n        this.clearSelection();\n        this.input.setAttribute('aria-expanded', 'false');\n        this.input.removeEventListener('compositionstart', this.compositionEventHandler);\n        this.input.removeEventListener('compositionend', this.compositionEventHandler);\n        this.input.removeEventListener('input', this.inputHandler);\n        this.input.removeEventListener('keydown', this.keyboardEventHandler);\n        this.list.removeEventListener('click', commitWithElement);\n    }\n    indicateDefaultOption() {\n        var _a;\n        if (this.firstOptionSelectionMode === 'active') {\n            (_a = Array.from(this.list.querySelectorAll('[role=\"option\"]:not([aria-disabled=\"true\"])'))\n                .filter(visible)[0]) === null || _a === void 0 ? void 0 : _a.setAttribute('data-combobox-option-default', 'true');\n        }\n        else if (this.firstOptionSelectionMode === 'selected') {\n            this.navigate(1);\n        }\n    }\n    navigate(indexDiff = 1) {\n        const focusEl = Array.from(this.list.querySelectorAll('[aria-selected=\"true\"]')).filter(visible)[0];\n        const els = Array.from(this.list.querySelectorAll('[role=\"option\"]')).filter(visible);\n        const focusIndex = els.indexOf(focusEl);\n        if ((focusIndex === els.length - 1 && indexDiff === 1) || (focusIndex === 0 && indexDiff === -1)) {\n            this.clearSelection();\n            this.input.focus();\n            return;\n        }\n        let indexOfItem = indexDiff === 1 ? 0 : els.length - 1;\n        if (focusEl && focusIndex >= 0) {\n            const newIndex = focusIndex + indexDiff;\n            if (newIndex >= 0 && newIndex < els.length)\n                indexOfItem = newIndex;\n        }\n        const target = els[indexOfItem];\n        if (!target)\n            return;\n        for (const el of els) {\n            el.removeAttribute('data-combobox-option-default');\n            if (target === el) {\n                this.input.setAttribute('aria-activedescendant', target.id);\n                target.setAttribute('aria-selected', 'true');\n                fireSelectEvent(target);\n                target.scrollIntoView(this.scrollIntoViewOptions);\n            }\n            else {\n                el.removeAttribute('aria-selected');\n            }\n        }\n    }\n    clearSelection() {\n        this.input.removeAttribute('aria-activedescendant');\n        for (const el of this.list.querySelectorAll('[aria-selected=\"true\"], [data-combobox-option-default=\"true\"]')) {\n            el.removeAttribute('aria-selected');\n            el.removeAttribute('data-combobox-option-default');\n        }\n    }\n    resetSelection() {\n        this.clearSelection();\n        this.indicateDefaultOption();\n    }\n}\nfunction keyboardBindings(event, combobox) {\n    if (event.shiftKey || event.metaKey || event.altKey)\n        return;\n    if (!combobox.ctrlBindings && event.ctrlKey)\n        return;\n    if (combobox.isComposing)\n        return;\n    switch (event.key) {\n        case 'Enter':\n            if (commit(combobox.input, combobox.list)) {\n                event.preventDefault();\n            }\n            break;\n        case 'Tab':\n            if (combobox.tabInsertsSuggestions && commit(combobox.input, combobox.list)) {\n                event.preventDefault();\n            }\n            break;\n        case 'Escape':\n            combobox.clearSelection();\n            break;\n        case 'ArrowDown':\n            combobox.navigate(1);\n            event.preventDefault();\n            break;\n        case 'ArrowUp':\n            combobox.navigate(-1);\n            event.preventDefault();\n            break;\n        case 'n':\n            if (combobox.ctrlBindings && event.ctrlKey) {\n                combobox.navigate(1);\n                event.preventDefault();\n            }\n            break;\n        case 'p':\n            if (combobox.ctrlBindings && event.ctrlKey) {\n                combobox.navigate(-1);\n                event.preventDefault();\n            }\n            break;\n        default:\n            if (event.ctrlKey)\n                break;\n            combobox.resetSelection();\n    }\n}\nfunction commitWithElement(event) {\n    if (!(event.target instanceof Element))\n        return;\n    const target = event.target.closest('[role=\"option\"]');\n    if (!target)\n        return;\n    if (target.getAttribute('aria-disabled') === 'true')\n        return;\n    fireCommitEvent(target, { event });\n}\nfunction commit(input, list) {\n    const target = list.querySelector('[aria-selected=\"true\"], [data-combobox-option-default=\"true\"]');\n    if (!target)\n        return false;\n    if (target.getAttribute('aria-disabled') === 'true')\n        return true;\n    target.click();\n    return true;\n}\nfunction fireCommitEvent(target, detail) {\n    target.dispatchEvent(new CustomEvent('combobox-commit', { bubbles: true, detail }));\n}\nfunction fireSelectEvent(target) {\n    target.dispatchEvent(new Event('combobox-select', { bubbles: true }));\n}\nfunction visible(el) {\n    return (!el.hidden &&\n        !(el instanceof HTMLInputElement && el.type === 'hidden') &&\n        (el.offsetWidth > 0 || el.offsetHeight > 0));\n}\nfunction trackComposition(event, combobox) {\n    combobox.isComposing = event.type === 'compositionstart';\n    const list = document.getElementById(combobox.input.getAttribute('aria-controls') || '');\n    if (!list)\n        return;\n    combobox.clearSelection();\n}\n"],
  "mappings": "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",
  "names": []
}
